ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
#  geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
#                  width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))
# labels
base_plataformas$region <- factor(base_plataformas$region
#                                  labels = c("Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota", "Ñuble")
)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds <- base_plataformas %>% as_survey_design(ids = 1,
weights = fact_anual)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
base_plataformas <- rbind(base_plataformas_2020, base_plataformas_2021, base_plataformas_2022)
# labels
base_plataformas$region <- as_factor(base_plataformas$region
#                                  labels = c("Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota", "Ñuble")
)
ds <- base_plataformas %>% as_survey_design(ids = 1,
weights = fact_anual)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
# labels
base_plataformas$region <- factor(base_plataformas$region,
labels = c("Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota", "Ñuble")
)
# labels
base_plataformas$region <- factor(base_plataformas$region,
labels = c("Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Magallanes", "Arica y Parinacota", "Ñuble")
)
ds <- base_plataformas %>% as_survey_design(ids = 1,
weights = fact_anual)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
# labels
base_plataformas$region <- as_factor(base_plataformas$region
#                                  labels = c("Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Magallanes", "Arica y Parinacota", "Ñuble")
)
# base procesada
load(file="input/data/proc/base_plataformas_2020.RData")
load(file="input/data/proc/base_plataformas_2021.RData")
load(file="input/data/proc/base_plataformas_2022.RData")
base_plataformas_2020 <- base_plataformas_2020 %>% set_na(., na = c(77, 88, 99))
base_plataformas_2020 <- base_plataformas_2020 %>% dplyr::select(ano=ano_encuesta,
region,
tramo_edad,
sexo,
nacionalidad,
cine,
b7a_1,
b7a_2,
b7a_3,
b7b_1,
b8,
ocup_honorarios,
b17_ano,
turno,
fact_anual) %>% as.data.frame()
base_plataformas_2021 <- base_plataformas_2021 %>% set_na(., na = c(77, 88, 99))
base_plataformas_2021 <- base_plataformas_2021 %>% dplyr::select(ano=ano_encuesta,
region,
tramo_edad,
sexo,
nacionalidad,
cine,
b7a_1,
b7a_2,
b7a_3,
b7b_1,
b8,
ocup_honorarios,
b17_ano,
turno,
fact_anual) %>% as.data.frame()
base_plataformas_2022 <- base_plataformas_2022 %>% set_na(., na = c(77, 88, 99))
base_plataformas_2022 <- base_plataformas_2022 %>% dplyr::select(ano=ano_encuesta,
region,
tramo_edad,
sexo,
nacionalidad,
cine,
b7a_1,
b7a_2,
b7a_3,
b7b_1,
b8,
ocup_honorarios,
b17_ano,
turno,
fact_anual) %>% as.data.frame()
base_plataformas <- rbind(base_plataformas_2020, base_plataformas_2021, base_plataformas_2022)
# labels
base_plataformas$region <- as_factor(base_plataformas$region
#                                  labels = c("Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Magallanes", "Arica y Parinacota", "Ñuble")
)
## Con error estandar
ds %>% group_by(cine) %>% summarise(educacion=survey_total(na.rm = TRUE))
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
# labels
base_plataformas$region <- as_factor(base_plataformas$region
#                                  labels = c("Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Magallanes", "Arica y Parinacota", "Ñuble")
)
ds <- base_plataformas %>% as_survey_design(ids = 1,
weights = fact_anual)
## Con error estandar
ds %>% group_by(cine) %>% summarise(educacion=survey_total(na.rm = TRUE))
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
scale_x_discrete(labels=labels_2022)+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
scale_x_discrete(labels=labels_2022$region)+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
scale_x_discrete(labels=labs(labels_2022$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
scale_x_discrete(labels=labs(labels_2022$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
scale_x_discrete(labels=get_labels(labels_2022$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
scale_x_discrete(labels=get_labels(labels_2021$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
scale_x_discrete(labels=get_labels(labels_2020$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
scale_x_discrete(labels=get_labels(labels_2020$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(~ano)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
#  scale_x_discrete(labels=get_labels(labels_2020$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(~ano)
View(base_plataformas)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
#  scale_x_discrete(labels=get_labels(labels_2020$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(~sexo)
ds %>% group_by(region) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
#  scale_x_discrete(labels=get_labels(labels_2020$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(ano)
?facet_wrao
?facet_wrap
ds %>% group_by(region, ano) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
#  scale_x_discrete(labels=get_labels(labels_2020$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(ano)
ds %>% group_by(region, ano) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
#  scale_x_discrete(labels=get_labels(labels_2020$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(~ano)
# labels
base_plataformas$region <- factor(base_plataformas$region,
labels = c("Tarapacá", "Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Aysén", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota", "Ñuble")
)
# labels
base_plataformas$region <- factor(base_plataformas$region,
labels = c("Tarapacá", "Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Aysén", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota")
)
ds <- base_plataformas %>% as_survey_design(ids = 1,
weights = fact_anual)
## Con error estandar
ds %>% group_by(cine) %>% summarise(educacion=survey_total(na.rm = TRUE))
ds %>% group_by(region, ano) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
#  scale_x_discrete(labels=get_labels(labels_2020$region))+
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(~ano)
ds %>% group_by(region, ano) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(~ano)
base_plataformas <- rbind(base_plataformas_2020, base_plataformas_2021, base_plataformas_2022)
ds <- base_plataformas %>% as_survey_design(ids = 1,
weights = fact_anual)
ds %>% group_by(region, ano) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(~ano)
# labels
base_plataformas$region <- as.factor(base_plataformas$region,
#                                labels = c("Tarapacá", "Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Aysén", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota")
)
# labels
base_plataformas$region <- as_factor(base_plataformas$region
#                                labels = c("Tarapacá", "Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Aysén", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota")
)
ds <- base_plataformas %>% as_survey_design(ids = 1,
weights = fact_anual)
ds %>% group_by(region, ano) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(~ano)
# labels
base_plataformas$region <- factor(base_plataformas$region,
labels = c("Tarapacá", "Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota")
)
# labels
base_plataformas$region <- factor(base_plataformas$region,
labels = c("Tarapacá", "Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota", "Ñuble")
)
ds <- base_plataformas %>% as_survey_design(ids = 1,
weights = fact_anual)
ds %>% group_by(region, ano) %>%
summarise(region_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=region,y=region_y,fill=region))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
geom_errorbar(aes(ymin=region_y_low, ymax=region_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE) +
facet_wrap(~ano)
base_plataformas$tramo_edad <- factor(base_plataformas$tramo_edad, labels = c("15 a 19 años", "20 a 24 años", "25 a 29 años", "30 a 34 años", "35 a 39 años", "40 a 44 años", "45 a 49 años", "50 a 54 años", "55 a 59 años", "60 a 64 años"))
base_plataformas$tramo_edad <- factor(base_plataformas$tramo_edad, labels = c("15 a 19 años", "20 a 24 años", "25 a 29 años", "30 a 34 años", "35 a 39 años", "40 a 44 años", "45 a 49 años", "50 a 54 años", "55 a 59 años", "60 a 64 años", "65 o más"))
base_plataformas$sexo <- factor(base_plataformas$sexo, labels = c("Hombre", "Mujer")) # sexo
ds %>% group_by(nacionalidad) %>%
summarise(nacionalidad_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=nacionalidad,y=nacionalidad_y,fill=nacionalidad))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
geom_errorbar(aes(ymin=nacionalidad_y_low, ymax=nacionalidad_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
base_plataformas$nacionalidad <- factor(base_plataformas$nacionalidad
#labels = c("Argentina", "Chile", "Colombia", "Paraguay", "Perú", "Venezuela") # migrante
)
ds %>% group_by(nacionalidad) %>%
summarise(nacionalidad_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=nacionalidad,y=nacionalidad_y,fill=nacionalidad))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
geom_errorbar(aes(ymin=nacionalidad_y_low, ymax=nacionalidad_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
ds <- base_plataformas %>% as_survey_design(ids = 1,
weights = fact_anual)
ds %>% group_by(nacionalidad) %>%
summarise(nacionalidad_y=survey_total(na.rm = TRUE, vartype=c("ci"),level=c(0.95))) %>%
ggplot(aes(x=nacionalidad,y=nacionalidad_y,fill=nacionalidad))+
geom_bar(stat = "identity") +
ylab(label="Cantidad")+
geom_errorbar(aes(ymin=nacionalidad_y_low, ymax=nacionalidad_y_upp),
width=0.2, position=position_dodge(.9)) +
guides(fill = FALSE)
sjmisc::frq(base_plataformas$nacionalidad)
base_plataformas <- rbind(base_plataformas_2020, base_plataformas_2021, base_plataformas_2022)
sjmisc::frq(base_plataformas$nacionalidad)
sjmisc::frq(base_plataformas$cine)
## Con error estandar
ds %>% group_by(cine) %>% summarise(educacion=survey_total(na.rm = TRUE))
base_plataformas %>% group_by(ano) %>%
sjPlot::sjt.xtab(sexo, cine,
show.summary = F, emph.total = T,
weight.by = base_plataformas$fact_anual,
encoding = "UTF-8")
base_plataformas %>% group_by(ano, sexo, cine) %>%
sjPlot::sjt.xtab(sexo, cine,
show.summary = F, emph.total = T,
weight.by = base_plataformas$fact_anual,
encoding = "UTF-8")
base_plataformas <- rbind(base_plataformas_2020, base_plataformas_2021, base_plataformas_2022)
# labels
base_plataformas$region <- factor(base_plataformas$region,
labels = c("Tarapacá", "Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota", "Ñuble")
)
base_plataformas$tramo_edad <- factor(base_plataformas$tramo_edad, labels = c("15 a 19 años", "20 a 24 años", "25 a 29 años", "30 a 34 años", "35 a 39 años", "40 a 44 años", "45 a 49 años", "50 a 54 años", "55 a 59 años", "60 a 64 años", "65 o más"))
base_plataformas$sexo <- factor(base_plataformas$sexo, labels = c("Hombre", "Mujer")) # sexo
base_plataformas$nacionalidad <- factor(base_plataformas$nacionalidad,
labels = c("Argentina", "Chile", "Colombia", "Cuba", "Paraguay", "Perú", "Uruguay", "Venezuela") # migrante
)
base_plataformas$cine <- factor(base_plataformas$cine, labels = c("Educación primaria", "Educación secundaria", "Educación técnica", "Educación universitaria", "Postítulos y maestría")) # educacion
## Con error estandar
ds %>% group_by(cine) %>% summarise(educacion=survey_total(na.rm = TRUE))
sjmisc::frq(base_plataformas$cine)
base_plataformas$cine <- factor(base_plataformas$cine, labels = c("Educación primaria", "Educación secundaria", "Educación técnica", "Educación universitaria", "Postítulos y maestría", "No informado")) # educacion
base_plataformas$b7a_1 <- factor(base_plataformas$b7a_1, levels = c(1, 2), labels = c("Si", "No")) # pension
base_plataformas$b7a_2 <- factor(base_plataformas$b7a_2, levels = c(1, 2), labels = c("Si", "No")) # salud
base_plataformas$b7a_3 <- factor(base_plataformas$b7a_3, levels = c(1, 2), labels = c("Si", "No")) # desempleo
base_plataformas$b7b_1 <- factor(base_plataformas$b7b_1, levels = c(1, 2), labels = c("Si", "No")) # vacaciones
base_plataformas$b8 <- factor(base_plataformas$b8, levels = c(1, 2), labels = c("Si", "No")) # contrato
base_plataformas$ocup_honorarios <- factor(base_plataformas$ocup_honorarios, levels = c(1, 2, 3), labels = c("Si", "No", "No sabe")) # boleta
#base_plataformas$b17_ano <- factor(base_plataformas$b17_ano) # Año ingreso
#base_plataformas$c1 <- sjlabelled::as_factor(base_plataformas$c1) # Tipo jornada
base_plataformas$turno <- factor(base_plataformas$turno, levels = c(1, 2), labels = c("Si", "No")) # Turnos
#label
base_plataformas$region <- sjlabelled::set_label(x = base_plataformas$region,
label = get_label(labels$region))
base_plataformas <- rbind(base_plataformas_2020, base_plataformas_2021, base_plataformas_2022)
labels <- base_plataformas
# labels
base_plataformas$region <- factor(base_plataformas$region,
labels = c("Tarapacá", "Antofagasta", "Atacama", "Coquimbo", "Valparaíso", "O'Higgins", "Maule", "Biobío", "Araucanía", "Los Lagos", "Magallanes", "Metropolitana", "Los Ríos", "Arica y Parinacota", "Ñuble")
)
base_plataformas$tramo_edad <- factor(base_plataformas$tramo_edad, labels = c("15 a 19 años", "20 a 24 años", "25 a 29 años", "30 a 34 años", "35 a 39 años", "40 a 44 años", "45 a 49 años", "50 a 54 años", "55 a 59 años", "60 a 64 años", "65 o más"))
base_plataformas$sexo <- factor(base_plataformas$sexo, labels = c("Hombre", "Mujer")) # sexo
base_plataformas$nacionalidad <- factor(base_plataformas$nacionalidad,
labels = c("Argentina", "Chile", "Colombia", "Cuba", "Paraguay", "Perú", "Uruguay", "Venezuela") # migrante
)
base_plataformas$cine <- factor(base_plataformas$cine, labels = c("Educación primaria", "Educación secundaria", "Educación técnica", "Educación universitaria", "Postítulos y maestría", "No informado")) # educacion
base_plataformas$b7a_1 <- factor(base_plataformas$b7a_1, levels = c(1, 2), labels = c("Si", "No")) # pension
base_plataformas$b7a_2 <- factor(base_plataformas$b7a_2, levels = c(1, 2), labels = c("Si", "No")) # salud
base_plataformas$b7a_3 <- factor(base_plataformas$b7a_3, levels = c(1, 2), labels = c("Si", "No")) # desempleo
base_plataformas$b7b_1 <- factor(base_plataformas$b7b_1, levels = c(1, 2), labels = c("Si", "No")) # vacaciones
base_plataformas$b8 <- factor(base_plataformas$b8, levels = c(1, 2), labels = c("Si", "No")) # contrato
base_plataformas$ocup_honorarios <- factor(base_plataformas$ocup_honorarios, levels = c(1, 2, 3), labels = c("Si", "No", "No sabe")) # boleta
#base_plataformas$b17_ano <- factor(base_plataformas$b17_ano) # Año ingreso
#base_plataformas$c1 <- sjlabelled::as_factor(base_plataformas$c1) # Tipo jornada
base_plataformas$turno <- factor(base_plataformas$turno, levels = c(1, 2), labels = c("Si", "No")) # Turnos
#label
base_plataformas$region <- sjlabelled::set_label(x = base_plataformas$region,
label = get_label(labels$region))
base_plataformas$tramo_edad <- sjlabelled::set_label(x = base_plataformas$tramo_edad,
label = get_label(labels$tramo_edad))
base_plataformas$sexo <- sjlabelled::set_label(x = base_plataformas$sexo,
label = get_label(labels$sexo)) # sexo
base_plataformas$nacionalidad <- sjlabelled::set_label(x = base_plataformas$nacionalidad,
label = get_label(labels$nacionalidad)) # migrante
base_plataformas$cine <- sjlabelled::set_label(x = base_plataformas$cine,
label = get_label(labels$cine)) # educacion
base_plataformas$b7a_1 <- sjlabelled::set_label(x = base_plataformas$b7a_1,
label = get_label(labels$b7a_1)) # pension
base_plataformas$b7a_2 <- sjlabelled::set_label(x = base_plataformas$b7a_2,
label = get_label(labels$b7a_2)) # salud
base_plataformas$b7a_3 <- sjlabelled::set_label(x = base_plataformas$b7a_3,
label = get_label(labels$b7a_3)) # desempleo
base_plataformas$b7b_1 <- sjlabelled::set_label(x = base_plataformas$b7b_1,
label = get_label(labels$b7b_1)) # vacaciones
base_plataformas$b8 <- sjlabelled::set_label(x = base_plataformas$b8,
label = get_label(labels$b8)) # contrato
base_plataformas$ocup_honorarios <- sjlabelled::set_label(x = base_plataformas$ocup_honorarios,
label = get_label(labels$ocup_honorarios)) # boleta
#base_plataformas$b17_ano <- sjlabelled::set_label(x = base_plataformas$b17_ano,
#                      label = get_label(labels$b17_ano)) # Año ingreso
#base_plataformas$c1 <- sjlabelled::as_factor(base_plataformas$c1) # Tipo jornada
base_plataformas$turno <- sjlabelled::set_label(x = base_plataformas$turno,
label = get_label(labels$turno)) # Turnos
df2 <- base_plataformas %>% filter(ano==2021) %>%
dfSummary(.,
plain.ascii = FALSE,
style = "grid",
tmp.img.dir = "/tmp",
graph.magnif = 0.75,
headings = F,  # encabezado
varnumbers = F, # num variable
labels.col = T, # etiquetas
na.col = T,    # missing
graph.col = F, # plot
valid.col = T, # n valido
max.distinct.values = 15,
display.labels = TRUE)
df2$Variable <- NULL
view(df2,file = "output/tables/table-2020.html")
